---
description: Interactive setup wizard to generate your config.yaml
argument-hint: [reset]
---

# Client Pulse Setup Wizard

Help users create their `config.yaml` by fetching real data from Slack and Monday.com.

**Arguments:** $ARGUMENTS
- `reset` - Start fresh, ignore existing config.yaml

---

## Step 1: Check for Existing Config

```
1. Glob for **/client-pulse/config.yaml
2. If exists and no "reset" argument:
   - Show current clients: "You have X clients configured: [list]"
   - Ask: "Add another client, or start fresh?"
3. If not exists or "reset":
   - Start fresh wizard
```

---

## Step 2: Collect User Info (if new config)

Ask these questions using AskUserQuestion:

**Question 1: Your Info**
```
What's your name? (e.g., "Brandon Guerrero")
```

**Question 2: Email**
```
What's your work email? (e.g., "brandon@thekiln.com")
```

**Question 3: Slack ID**
```
What's your Slack member ID?

To find it:
1. Click your profile in Slack
2. Click "More" (three dots)
3. Select "Copy member ID"

Example: U07UE2Z6X62
```

---

## Step 3: Fetch Available Slack Channels

Use Rube MCP to list Slack channels:

```
RUBE_SEARCH_TOOLS({
  queries: [{use_case: "list slack channels"}],
  session: {generate_id: true}
})

Then: SLACK_LIST_CONVERSATIONS or similar tool
```

**Filter and display:**
- Show channels starting with `ext-` (external client channels)
- Show channels starting with `int-` or `_int-` (internal channels)
- Group by apparent client name

**Example output:**
```
Found these client-related channels:

SENDOSO:
  ext-thekiln-sendoso (C080HCLK129) - 1,234 members
  int_sendoso (C08KQP7UT7E) - 5 members

PROFOUND:
  ext-profound-thekiln (C09KEMTCJM6) - 45 members
  _int-profound (C09JDFWPRQB) - 4 members

WINDSURF:
  ext-kiln-cognition (C080S2NUW0G) - 23 members
  _int-windsurf (C08KPFZAWCT) - 3 members
```

---

## Step 4: Fetch Monday.com Boards

Use Monday MCP to list boards:

```
mcp__plugin_client_pulse_gumloop_monday__search_items or list_boards
```

**Display:**
```
Found these Monday.com boards:

1. Sendoso // The Kiln Projects (8185023177)
2. Profound // The Kiln Projects (18117657097)
3. Codeium // The Kiln Projects (8185012558)
```

---

## Step 5: Interactive Client Setup

For each client the user wants to add:

**Question: Client Key**
```
Enter a short key for this client (lowercase, no spaces):
Examples: sendoso, profound, windsurf
```

**Question: Display Name**
```
Enter the display name: (e.g., "Sendoso")
```

**Question: Emoji**
```
Pick an emoji for this client: (e.g., üì¶, üîÆ, üåä)
```

**Question: External Slack Channel**
```
Which external channel? (from list above)
[Show numbered list of ext-* channels]
```

**Question: Internal Slack Channel**
```
Which internal channel? (from list above)
[Show numbered list of int-* channels]
```

**Question: Monday Board**
```
Which Monday.com board? (from list above)
[Show numbered list of boards]
```

**Question: Client Domains**
```
What email domains does this client use?
(comma-separated, e.g., "sendoso.com, sendoso.io")
```

**Question: Keywords**
```
What keywords identify this client in internal discussions?
(comma-separated, e.g., "Sendoso, Hannah, gifting, SmartSend")
```

**Question: Primary Contact**
```
Who is your main contact at this client?
Name:
```

---

## Step 6: Generate config.yaml

Build the YAML file from collected data:

```yaml
# Generated by /setup on [date]
# Client Pulse Configuration for [User Name]

me:
  name: "[collected]"
  role: "GTM Engineer"
  email: "[collected]"
  slack_id: "[collected]"
  company: "The Kiln"

team:
  name: "The Kiln"
  members:
    - id: "[user's slack_id]"
      name: "[user's name]"
      email: "[user's email]"

clients:
  [client_key]:
    display_name: "[collected]"
    emoji: "[collected]"
    description: "[auto-generated or asked]"

    domains:
      - "[collected]"

    keywords:
      - "[collected]"

    contacts:
      - name: "[collected]"
        role: "Primary POC"

    slack:
      external:
        id: "[from selection]"
        name: "[from selection]"
      internal:
        id: "[from selection]"
        name: "[from selection]"

    monday:
      board_id: [from selection]
      board_name: "[from selection]"

data_sources:
  fathom:
    enabled: true
  slack:
    external_channel_limit: 200
    internal_channel_limit: 100
  monday:
    enabled: true
    task_limit: 100
  gmail:
    enabled: true
    max_results: 50
  calendar:
    enabled: true
    lookahead_days: 14

behavior:
  default_lookback_days: 7
  expand_all_threads_in_range: true
  urgent_thresholds:
    unanswered_hours: 24
    overdue_task_days: 0
```

---

## Step 7: Write and Confirm

1. Show the generated YAML to the user
2. Ask for confirmation
3. Write to `config.yaml` in the plugin directory (use Glob to find path)
4. Confirm success

```
‚úÖ Config saved to /path/to/client-pulse/config.yaml

You now have 3 clients configured:
- sendoso (üì¶ Sendoso)
- profound (üîÆ Profound)
- windsurf (üåä Windsurf)

Test with: /pulse sendoso 7
```

---

## Step 8: Add Another Client?

```
Would you like to add another client?
- Yes, add another
- No, I'm done
```

If yes, loop back to Step 5.

---

## Error Handling

**If Slack MCP not connected:**
```
‚ö†Ô∏è Slack not connected.

Run /mcp to check status, then click the OAuth link for rube-kiln.

Or enter channel IDs manually:
- External channel ID:
- Internal channel ID:
```

**If Monday MCP not connected:**
```
‚ö†Ô∏è Monday.com not connected.

Enter board ID manually (find in URL: monday.com/boards/[ID]):
```

---

## Quick Mode (for experienced users)

If user runs `/setup quick`:

```
Paste your client info in this format:

client_key: sendoso
display_name: Sendoso
emoji: üì¶
ext_channel: C080HCLK129
int_channel: C08KQP7UT7E
monday_board: 8185023177
domains: sendoso.com
keywords: Sendoso, Hannah, gifting
contact: Hannah Baldo
```

Parse and generate config without the interactive flow.
